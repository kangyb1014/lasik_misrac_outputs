{
  "user_message": "An agent A claimed that the following MHD_run_wait code violates the MISRA C 2023 rule 14.3.\n<misra_rule>\nMISRA C 2023 Rule 14.3 is Controlling expressions shall not be invariant.\nHere are exceptions to this rule:\n1. Invariants that are used to create infinite loops are permitted.\n2. A do-while loop with an essentially Boolean controlling expression that evaluates to false and satisfies the constraints and semantics for an integer constant expression is permitted.\n</misra_rule>\n<target_code>\nHere is the original code of MHD_run_wait.\n```c\n_MHD_EXTERN enum MHD_Result\nMHD_run_wait (struct MHD_Daemon *daemon,\n              int32_t millisec)\n{\n  enum MHD_Result res;\n  if ( (daemon->shutdown) ||\n       MHD_D_IS_USING_THREADS_ (daemon) )\n    return MHD_NO;\n\n  mhd_assert (! MHD_thread_handle_ID_is_valid_handle_ (daemon->tid));\n\n  if (0 > millisec)\n    millisec = -1;\n#ifdef HAVE_POLL\n  if (MHD_D_IS_USING_POLL_ (daemon))\n  {\n    res = MHD_poll_all (daemon, millisec);\n    MHD_cleanup_connections (daemon);\n  }\n  else\n#endif /* HAVE_POLL */\n#ifdef EPOLL_SUPPORT\n  if (MHD_D_IS_USING_EPOLL_ (daemon))\n  {\n    res = MHD_epoll (daemon, millisec);\n    MHD_cleanup_connections (daemon);\n  }\n  else\n#endif\n  if (1)\n  {\n    mhd_assert (MHD_D_IS_USING_SELECT_ (daemon));\n#ifdef HAS_FD_SETSIZE_OVERRIDABLE\n#ifdef HAVE_MESSAGES\n    if (daemon->fdset_size_set_by_app\n        && (((int) FD_SETSIZE) < daemon->fdset_size))\n    {\n      MHD_DLOG (daemon,\n                _ (\"MHD_run()/MHD_run_wait() called for daemon started with \" \\\n                   \"MHD_OPTION_APP_FD_SETSIZE option (%d). \" \\\n                   \"The library was compiled with smaller FD_SETSIZE (%d). \" \\\n                   \"Some socket FDs may be not processed. \" \\\n                   \"Use MHD_run_from_select2() instead of MHD_run() or \" \\\n                   \"do not use MHD_OPTION_APP_FD_SETSIZE option.\\n\"),\n                daemon->fdset_size, (int) FD_SETSIZE);\n    }\n#endif /* HAVE_MESSAGES */\n#endif /* HAS_FD_SETSIZE_OVERRIDABLE */\n\n    res = MHD_select (daemon, millisec);\n    /* MHD_select does MHD_cleanup_connections already */\n  }\n  return res;\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nThe 'if (1)' controlling expression is an invariant (always true). This is not an infinite loop nor a do-while with an essentially Boolean constant-false expression, so it is not covered by the rule exceptions. Therefore the use of 'if (1) { ... }' here violates MISRA C 2023 Rule 14.3.\n</scenario>\n\n<execution_log>\nThe agent A also provided the following output log:\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter assert: tid handle valid check passed, tid=0x55cfa470bf38\nEntered select branch (if (1) true). Expecting SELECT backend.\nAssertion: MHD_D_IS_USING_SELECT_ holds. Calling MHD_select millisec=0\nMHD_select returned 1\nMHD_run_wait about to return res=1\nMHD_run_wait called: daemon=0x55cfa470bde0, millisec=0\nAfter asser\n</execution_log>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": true,
  "explanation": "The claim is correct. Rule 14.3 forbids invariant controlling expressions; an if-statement with the constant expression '1' is an invariant (always true) and is not one of the permitted exceptions (the rule explicitly permits infinite loops or a do-while with a constant-false boolean expression). The conditional here is not an infinite loop nor the allowed do-while form, so 'if (1) { ... }' violates MISRA C 2023 Rule 14.3. The runtime log showing the branch taken does not affect the rule judgment \u2014 the controlling expression is still invariant at compile time."
}