{
  "user_message": "An agent A claimed that the following OS_SocketListen_Impl code violates the MISRA C 2023 rule 8.13.\n<misra_rule>\nMISRA C 2023 Rule 8.13 is A pointer should point to a const-qualified type whenever possible.\n\n</misra_rule>\n<target_code>\nHere is the original code of OS_SocketListen_Impl.\n```c\nint32 OS_SocketListen_Impl(const OS_object_token_t *token)\n{\n    int                             os_result;\n    OS_impl_file_internal_record_t *impl;\n\n    impl = OS_OBJECT_TABLE_GET(OS_impl_filehandle_table, *token);\n\n    os_result = listen(impl->fd, 10);\n    if (os_result < 0)\n    {\n        OS_DEBUG(\"listen: %s\\n\", strerror(errno));\n        return OS_ERROR;\n    }\n\n    return OS_SUCCESS;\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nThe local pointer 'impl' is declared as OS_impl_file_internal_record_t * but in this function it is only used for read access (listen(impl->fd, ...)) and the pointed object is not modified. It should be declared as a pointer to const (const OS_impl_file_internal_record_t *impl) to indicate immutability and satisfy MISRA C 2023 Rule 8.13.\n</scenario>\n<additional code>Here are the definitions of symbols that are close to the target function OS_SocketListen_Impl:\ntypedef struct\n{\n    int  fd;\n    bool selectable;\n} OS_impl_file_internal_record_t\n...\n#define OS_OBJECT_TABLE_GET(tbl, tok) (&tbl[OS_ObjectIndexFromToken(&(tok))])\n...\nextern OS_impl_file_internal_record_t OS_impl_filehandle_table[OS_MAX_NUM_OPEN_FILES]\n...\ntypedef struct OS_object_token OS_object_token_t\n</additional code>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": true,
  "explanation": "The local pointer impl is only used to read impl->fd (no writes through impl occur). Per MISRA C:2023 Rule 8.13, a pointer should point to a const-qualified type whenever possible; here it is possible to declare impl as const OS_impl_file_internal_record_t *impl without changing the object or the table declaration. Assigning the address of a non-const object to a pointer-to-const is permitted and would correctly express the intent that this function does not modify the pointed object. Therefore the agent A's report is correct: the code does violate MISRA C 2023 Rule 8.13. A simple fix is to declare impl as const OS_impl_file_internal_record_t *impl (or initialize it as such in the declaration)."
}