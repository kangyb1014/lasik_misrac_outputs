{
  "result": "compile_failed",
  "message": "-- Build type:  \n-- Host:    Linux/x86_64\n-- Target:  Linux/x86_64\n-- Machine: Generic\n-- Vendor: none\n/tmp/tmpiat70sxw/src/lib/device.c:27:8: error: redefinition of 'struct metal_list'\n   27 | struct metal_list { void *p; };\n      |        ^~~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:19,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:26:8: note: originally defined here\n   26 | struct metal_list {\n      |        ^~~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c:29:13: error: conflicting types for 'metal_list_init'; have 'void(struct metal_list *)'\n   29 | extern void metal_list_init(struct metal_list *list);\n      |             ^~~~~~~~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:19,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:42:20: note: previous definition of 'metal_list_init' with type 'void(struct metal_list *)'\n   42 | static inline void metal_list_init(struct metal_list *list)\n      |                    ^~~~~~~~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c:30:13: error: conflicting types for 'metal_list_add_tail'; have 'void(void *, struct metal_node *)'\n   30 | extern void metal_list_add_tail(void *head, struct metal_node *node);\n      |             ^~~~~~~~~~~~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:19,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:72:20: note: previous definition of 'metal_list_add_tail' with type 'void(struct metal_list *, struct metal_list *)'\n   72 | static inline void metal_list_add_tail(struct metal_list *list,\n      |                    ^~~~~~~~~~~~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:18,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:98:37: error: expected identifier or '(' before '{' token\n   98 | #define metal_log(level, fmt, ...) ({                              \\\n      |                                     ^\n/tmp/tmpiat70sxw/src/lib/device.c:31:13: note: in expansion of macro 'metal_log'\n   31 | extern void metal_log(int level, const char *fmt, ...);\n      |             ^~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c:48:54: error: conflicting types for '_metal'; have 'struct <anonymous>'\n   48 | extern struct { struct { void *bus_list; } common; } _metal;\n      |                                                      ^~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/sys.h:96:27: note: previous declaration of '_metal' with type 'struct metal_state'\n   96 | extern struct metal_state _metal;\n      |                           ^~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c:49:18: error: 'METAL_LOG_DEBUG' redeclared as different kind of symbol\n   49 | extern const int METAL_LOG_DEBUG;\n      |                  ^~~~~~~~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:18,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:32:9: note: previous definition of 'METAL_LOG_DEBUG' with type 'enum metal_log_level'\n   32 |         METAL_LOG_DEBUG,        /**< debug-level messages.             */\n      |         ^~~~~~~~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c: In function 'metal_bus_register':\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:99:26: error: 'struct <anonymous>' has no member named 'log_handler'\n   99 |         if (_metal.common.log_handler && level <= _metal.common.log_level) \\\n      |                          ^\n/tmp/tmpiat70sxw/src/lib/device.c:78:5: note: in expansion of macro 'metal_log'\n   78 |     metal_log(METAL_LOG_DEBUG, \"registered %s bus\\n\", bus->name);\n      |     ^~~~~~~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:99:64: error: 'struct <anonymous>' has no member named 'log_level'\n   99 |         if (_metal.common.log_handler && level <= _metal.common.log_level) \\\n      |                                                                ^\n/tmp/tmpiat70sxw/src/lib/device.c:78:5: note: in expansion of macro 'metal_log'\n   78 |     metal_log(METAL_LOG_DEBUG, \"registered %s bus\\n\", bus->name);\n      |     ^~~~~~~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:100:30: error: 'struct <anonymous>' has no member named 'log_handler'\n  100 |                 _metal.common.log_handler(level, metal_fmt(fmt), ## __VA_ARGS__);  \\\n      |                              ^\n/tmp/tmpiat70sxw/src/lib/device.c:78:5: note: in expansion of macro 'metal_log'\n   78 |     metal_log(METAL_LOG_DEBUG, \"registered %s bus\\n\", bus->name);\n      |     ^~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c: In function 'metal_bus_unregister':\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:99:26: error: 'struct <anonymous>' has no member named 'log_handler'\n   99 |         if (_metal.common.log_handler && level <= _metal.common.log_level) \\\n      |                          ^\n/tmp/tmpiat70sxw/src/lib/device.c:89:9: note: in expansion of macro 'metal_log'\n   89 |         metal_log(METAL_LOG_DEBUG, \"unregistered %s bus\\n\", bus->name);\n      |         ^~~~~~~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:99:64: error: 'struct <anonymous>' has no member named 'log_level'\n   99 |         if (_metal.common.log_handler && level <= _metal.common.log_level) \\\n      |                                                                ^\n/tmp/tmpiat70sxw/src/lib/device.c:89:9: note: in expansion of macro 'metal_log'\n   89 |         metal_log(METAL_LOG_DEBUG, \"unregistered %s bus\\n\", bus->name);\n      |         ^~~~~~~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/log.h:100:30: error: 'struct <anonymous>' has no member named 'log_handler'\n  100 |                 _metal.common.log_handler(level, metal_fmt(fmt), ## __VA_ARGS__);  \\\n      |                              ^\n/tmp/tmpiat70sxw/src/lib/device.c:89:9: note: in expansion of macro 'metal_log'\n   89 |         metal_log(METAL_LOG_DEBUG, \"unregistered %s bus\\n\", bus->name);\n      |         ^~~~~~~~~\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:19,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/src/lib/device.c: In function 'metal_bus_find':\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:103:29: error: request for member 'next' in something not a structure or union\n  103 |         for ((node) = (list)->next;             \\\n      |                             ^~\n/tmp/tmpiat70sxw/src/lib/device.c:98:9: note: in expansion of macro 'metal_list_for_each'\n   98 |         metal_list_for_each(&_metal.common.bus_list, node) {\n      |         ^~~~~~~~~~~~~~~~~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:105:29: error: 'struct metal_list' has no member named 'next'\n  105 |              (node) = (node)->next)\n      |                             ^~\n/tmp/tmpiat70sxw/src/lib/device.c:98:9: note: in expansion of macro 'metal_list_for_each'\n   98 |         metal_list_for_each(&_metal.common.bus_list, node) {\n      |         ^~~~~~~~~~~~~~~~~~~\n/tmp/tmpiat70sxw/src/lib/device.c: In function 'metal_register_generic_device':\n/tmp/tmpiat70sxw/src/lib/device.c:147:43: error: 'struct <anonymous>' has no member named 'generic_device_list'\n  147 |         metal_list_add_tail(&_metal.common.generic_device_list,\n      |                                           ^\nIn file included from /tmp/tmpiat70sxw/build/lib/include/metal/sys.h:19,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/io.h:22,\n                 from /tmp/tmpiat70sxw/build/lib/include/metal/device.h:16,\n                 from /tmp/tmpiat70sxw/src/lib/device.c:18:\n/tmp/tmpiat70sxw/src/lib/device.c: In function 'metal_generic_dev_open':\n/tmp/tmpiat70sxw/src/lib/device.c:160:43: error: 'struct <anonymous>' has no member named 'generic_device_list'\n  160 |         metal_list_for_each(&_metal.common.generic_device_list, node) {\n      |                                           ^\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:103:24: note: in definition of macro 'metal_list_for_each'\n  103 |         for ((node) = (list)->next;             \\\n      |                        ^~~~\n/tmp/tmpiat70sxw/src/lib/device.c:160:43: error: 'struct <anonymous>' has no member named 'generic_device_list'\n  160 |         metal_list_for_each(&_metal.common.generic_device_list, node) {\n      |                                           ^\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:104:25: note: in definition of macro 'metal_list_for_each'\n  104 |              (node) != (list);                  \\\n      |                         ^~~~\n/tmp/tmpiat70sxw/build/lib/include/metal/list.h:105:29: error: 'struct metal_list' has no member named 'next'\n  105 |              (node) = (node)->next)\n      |                             ^~\n/tmp/tmpiat70sxw/src/lib/device.c:160:9: note: in expansion of macro 'metal_list_for_each'\n  160 |         metal_list_for_each(&_metal.common.generic_device_list, node) {\n      |         ^~~~~~~~~~~~~~~~~~~\ngmake[2]: *** [lib/CMakeFiles/metal-shared.dir/build.make:90: lib/CMakeFiles/metal-shared.dir/device.c.o] Error 1\ngmake[1]: *** [CMakeFiles/Makefile2:291: lib/CMakeFiles/metal-shared.dir/all] Error 2\ngmake: *** [Makefile:146: all] Error 2"
}