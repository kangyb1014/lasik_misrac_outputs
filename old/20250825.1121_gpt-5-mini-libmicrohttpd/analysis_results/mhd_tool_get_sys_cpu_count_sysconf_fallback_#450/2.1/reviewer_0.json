{
  "user_message": "An agent A claimed that the following mhd_tool_get_sys_cpu_count_sysconf_fallback_ code violates the MISRA C 2023 rule 2.1.\n<misra_rule>\nMISRA C 2023 Rule 2.1 is A project shall not contain unreachable code.\n\n</misra_rule>\n<target_code>\nHere is the original code of mhd_tool_get_sys_cpu_count_sysconf_fallback_.\n```c\nstatic int\nmhd_tool_get_sys_cpu_count_sysconf_fallback_ (void)\n{\n  int ret = -1;\n#if defined(HAVE_SYSCONF) && \\\n  (defined(HAS_DECL__SC_CRAY_NCPU) || defined(HAS_DECL__SC_NPROCESSORS_CONF))\n  long value = -1;\n#ifdef HAS_DECL__SC_CRAY_NCPU\n  if (0 >= value)\n    value = sysconf (_SC_CRAY_NCPU);\n#endif /* HAS_DECL__SC_CRAY_NCPU */\n#ifdef HAS_DECL__SC_NPROCESSORS_CONF\n  if (0 >= value)\n    value = sysconf (_SC_NPROCESSORS_CONF);\n#endif /* HAS_DECL__SC_NPROCESSORS_CONF */\n  if (0 >= value)\n    return -1;\n  ret = (int) value;\n  if ((long) ret != value)\n    return -1; /* Overflow */\n#endif /* HAVE_SYSCONF &&\n          (HAS_DECL__SC_CRAY_NCPU || HAS_DECL__SC_NPROCESSORS_CONF) */\n  return ret;\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nGiven the project macros shown (HAVE_SYSCONF and HAS_DECL__SC_NPROCESSORS_CONF defined, but HAS_DECL__SC_CRAY_NCPU not defined), the #ifdef HAS_DECL__SC_CRAY_NCPU block will never be compiled into the project. The code inside that conditional is therefore unreachable in this project configuration, violating MISRA C 2023 Rule 2.1.\n</scenario>\n<additional code>Here are the definitions of symbols that are close to the target function mhd_tool_get_sys_cpu_count_sysconf_fallback_:\n#define HAVE_SYSCONF 1\n...\n#define HAS_DECL__SC_NPROCESSORS_CONF 1\n</additional code>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": false,
  "explanation": "The report is not correct. Code excluded by the preprocessor (#ifdef) is not part of the translation unit built for the project configuration and therefore is not \"unreachable code\" in the delivered build \u2014 it simply does not exist in that build. MISRA Rule 2.1 prohibits code that is present in the project but cannot be reached at runtime; it does not treat text that is removed by preprocessing as unreachable. Given the stated macros (HAVE_SYSCONF and HAS_DECL__SC_NPROCESSORS_CONF defined, HAS_DECL__SC_CRAY_NCPU not defined), the HAS_DECL__SC_CRAY_NCPU block will not be compiled into the project and so does not constitute a Rule 2.1 violation. (If that block were compiled but rendered impossible to reach at runtime by program logic, then a Rule 2.1 issue could exist.)"
}