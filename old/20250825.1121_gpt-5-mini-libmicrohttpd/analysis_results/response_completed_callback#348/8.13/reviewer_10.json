{
  "user_message": "An agent A claimed that the following response_completed_callback code violates the MISRA C 2023 rule 8.13.\n<misra_rule>\nMISRA C 2023 Rule 8.13 is A pointer should point to a const-qualified type whenever possible.\n\n</misra_rule>\n<target_code>\nHere is the original code of response_completed_callback.\n```c\nstatic void\nresponse_completed_callback (void *cls,\n                             struct MHD_Connection *connection,\n                             void **req_cls,\n                             enum MHD_RequestTerminationCode toe)\n{\n  struct UploadContext *uc = *req_cls;\n  (void) cls;         /* Unused. Silent compiler warning. */\n  (void) connection;  /* Unused. Silent compiler warning. */\n  (void) toe;         /* Unused. Silent compiler warning. */\n\n  if (NULL == uc)\n    return; /* this request wasn't an upload request */\n  if (NULL != uc->pp)\n  {\n    MHD_destroy_post_processor (uc->pp);\n    uc->pp = NULL;\n  }\n  if (-1 != uc->fd)\n  {\n    (void) close (uc->fd);\n    if (NULL != uc->filename)\n    {\n      fprintf (stderr,\n               \"Upload of file `%s' failed (incomplete or aborted), removing file.\\n\",\n               uc->filename);\n      (void) unlink (uc->filename);\n    }\n  }\n  if (NULL != uc->filename)\n    free (uc->filename);\n  free (uc);\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nThe parameter `void *cls` (and similarly `struct MHD_Connection *connection`) is not const\u2011qualified even though it is unused and not modified in the function. According to MISRA C 2023 Rule 8.13, an input pointer that is not used to modify the pointed-to object should be declared to point to a const-qualified type (e.g. `const void *cls`, `const struct MHD_Connection *connection`). Note: if this function signature is mandated by an external API (a callback prototype from the library), changing the qualification is not possible and constitutes an acceptable justification for deviating from the rule.\n</scenario>\n<additional code>Here are the definitions of symbols that are close to the target function response_completed_callback:\nstruct UploadContext\n{\n  /**\n   * Handle where we write the uploaded file to.\n   */\n  int fd;\n\n  /**\n   * Name of the file on disk (used to remove on errors).\n   */\n  char *filename;\n\n  /**\n   * Language for the upload.\n   */\n  char *language;\n\n  /**\n   * Category for the upload.\n   */\n  char *category;\n\n  /**\n   * Post processor we're using to process the upload.\n   */\n  struct MHD_PostProcessor *pp;\n\n  /**\n   * Handle to connection that we're processing the upload for.\n   */\n  struct MHD_Connection *connection;\n\n  /**\n   * Response to generate, NULL to use directory.\n   */\n  struct MHD_Response *response;\n}\n...\nstruct MHD_Connection\n</additional code>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": false,
  "explanation": "The two parameters flagged (void *cls and struct MHD_Connection *connection) are part of the callback prototype used by the external library (the MHD_... types and callback signature). MISRA C Rule 8.13 does encourage const qualification for pointers that do not modify the pointed-to object, but when a function signature is mandated by an external API you cannot change its parameter types \u2014 that is an acceptable and expected justification for deviating from the rule. In this case the callback must match the library's prototype, so the code does not constitute an unjustified violation of Rule 8.13. (If the signature were under your control, then yes, const-qualified pointers would be preferred.)"
}