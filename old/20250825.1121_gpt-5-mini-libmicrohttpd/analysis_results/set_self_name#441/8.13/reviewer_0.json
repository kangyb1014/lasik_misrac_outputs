{
  "user_message": "An agent A claimed that the following set_self_name code violates the MISRA C 2023 rule 8.13.\n<misra_rule>\nMISRA C 2023 Rule 8.13 is A pointer should point to a const-qualified type whenever possible.\n\n</misra_rule>\n<target_code>\nHere is the original code of set_self_name.\n```c\nstatic void\nset_self_name (int argc, char *const *argv)\n{\n  if ((argc >= 1) && (NULL != argv[0]))\n  {\n    const char *last_dir_sep;\n    last_dir_sep = strrchr (argv[0], '/');\n#ifdef _WIN32\n    if (1)\n    {\n      const char *last_w32_dir_sep;\n      last_w32_dir_sep = strrchr (argv[0], '\\\\');\n      if ((NULL == last_dir_sep) ||\n          ((NULL != last_w32_dir_sep) && (last_w32_dir_sep > last_dir_sep)))\n        last_dir_sep = last_w32_dir_sep;\n    }\n#endif /* _WIN32 */\n    if (NULL != last_dir_sep)\n    {\n      size_t name_len;\n      name_len = strlen (last_dir_sep + 1);\n      if ((0 != name_len) && ((sizeof(self_name) / sizeof(char)) > name_len))\n      {\n        strcpy (self_name, last_dir_sep + 1);\n        return;\n      }\n    }\n  }\n  /* Set default name */\n  strcpy (self_name, \"perf_replies\");\n  return;\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nAlthough the local variable last_w32_dir_sep is const char * and strrchr accepts a const char * parameter, the function parameter is declared as char *const *argv (pointer to non-const char). According to MISRA C 2023 Rule 8.13 the pointer should point to a const-qualified type when possible; here argv should be declared const char *const *argv (or const char *argv[]) because the function does not modify the characters. Change the function signature (and callers) to const char *const *argv to comply.\n</scenario>\n<additional code>Here are the definitions of symbols that are close to the target function set_self_name:\nstatic char self_name[500] = \"perf_replies\"\n</additional code>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": true,
  "explanation": "The report is correct. MISRA C 2023 Rule 8.13 recommends that pointers should point to const-qualified types whenever the pointed-to objects are not modified. In set_self_name the function only reads the string(s) in argv (calling strrchr and strlen) and never modifies the characters; therefore the elements should be declared as pointers to const char. The current signature char *const *argv denotes pointers to non-const char and thus does not satisfy the guidance.\n\nA compliant declaration would be, for example, const char *const *argv (or equivalently const char *argv[]). Note: changing the prototype requires corresponding changes at the call sites \u2014 converting from the typical main signature (char *argv[]) to a parameter of type const char *const * is not an implicit, safe conversion in C, so callers may need explicit casts or to be updated to pass the new type. The use of strrchr (which accepts a const char *) does not remove the obligation to qualify argv appropriately for MISRA 8.13."
}