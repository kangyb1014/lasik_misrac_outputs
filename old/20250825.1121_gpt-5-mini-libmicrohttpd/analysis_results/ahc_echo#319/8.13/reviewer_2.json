{
  "user_message": "An agent A claimed that the following ahc_echo code violates the MISRA C 2023 rule 8.13.\n<misra_rule>\nMISRA C 2023 Rule 8.13 is A pointer should point to a const-qualified type whenever possible.\n\n</misra_rule>\n<target_code>\nHere is the original code of ahc_echo.\n```c\nstatic enum MHD_Result\nahc_echo (void *cls,\n          struct MHD_Connection *connection,\n          const char *url,\n          const char *method,\n          const char *version,\n          const char *upload_data, size_t *upload_data_size, void **req_cls)\n{\n  static int aptr;\n  struct handler_param *param = (struct handler_param *) cls;\n  struct MHD_Response *response;\n  enum MHD_Result ret;\n  (void) url;               /* Unused. Silent compiler warning. */\n  (void) version;           /* Unused. Silent compiler warning. */\n  (void) upload_data;       /* Unused. Silent compiler warning. */\n  (void) upload_data_size;  /* Unused. Silent compiler warning. */\n\n  if (0 != strcmp (method, \"GET\"))\n    return MHD_NO;              /* unexpected method */\n  if (&aptr != *req_cls)\n  {\n    /* do never respond on first call */\n    *req_cls = &aptr;\n    return MHD_YES;\n  }\n  *req_cls = NULL;                  /* reset when done */\n  response =\n    MHD_create_response_from_buffer_static (strlen (param->response_page),\n                                            param->response_page);\n  ret = MHD_queue_response (connection, MHD_HTTP_OK, response);\n  MHD_destroy_response (response);\n  return ret;\n}\n```\n</target_code>\n<response format>\nProvide your answer with these fields.\n- explanation: your evaluation of the scenario provided by the agent A.\n- is_report_correct: whether the report is correct or not (true/false). True means there is a violation.\n</response format>\n<scenario>\nThe agent A provided the following violation scenario:\nThe code stores the address of a static int (&aptr) into a void* slot (*req_cls = &aptr;) even though the pointed-to object is not modified through that pointer. The pointer target could be const-qualified (e.g. use const void * or make aptr const) to indicate immutability, so Rule 8.13 is violated. (Note: the callback API requires void **req_cls, so the violation stems from the API contract preventing a const-qualified pointer type.)\n</scenario>\n<additional code>Here are the definitions of symbols that are close to the target function ahc_echo:\nstruct handler_param\n{\n  const char *response_page;\n}\n...\n_MHD_EXTERN struct MHD_Response *\nMHD_create_response_from_buffer_static (size_t size,\n                                        const void *buffer)\n{\n  return MHD_create_response_from_buffer_with_free_callback_cls (size,\n                                                                 buffer,\n                                                                 NULL,\n                                                                 NULL);\n}\n</additional code>\n\n<instruction>\nJudge whether the report is correct or not.\n</instruction>\n",
  "is_report_correct": false,
  "explanation": "Not correct. MISRA C:2023 R8.13 advises that pointers should point to const-qualified types when that is possible in your own code, but here the pointer type is imposed by the external callback API (req_cls is declared as void **). You cannot sensibly change the API signature to const void ** without breaking the API contract, and converting a const-qualified object to void * would discard qualifiers. The code uses *req_cls as an opaque token (stores the address of a static int as a marker) rather than to modify the pointed-to object; there is no further access that would require a const qualification. Thus this scenario does not demonstrate a MISRA R8.13 violation in this unit (any required change would have to be made to the API or accommodated via a documented deviation)."
}